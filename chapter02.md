# 2장 도메인, 서브도메인, 바운디드 컨텍스트

## 큰 그림

- 넓은 의미에서 도메인이란 한 조직이 행하는 일과 그 조직 안의 세계를 일컽는다.
- 조직의 전체 도메인은 여러 서브도메인으로 이뤄져 있다.

### 서브 도메인과 바운디드 컨텍스트의 활용

- 여러 소프트웨어 도메인으로 나눌 수도 있는 소프트웨어 도메인 모델을 구분짓지 않는다면 변화가 계속됨에 따라 큰 부담이 된다.
- 서브 도메인은 고유의 핵심 도메인의 일부가 아닌, 일련의 알고리즘과 같은 간단한 형태일 수도 있다.
    - 좋은 DDD 기법을 적용한다면 간단한 서브도메인은 모듈을 이용해 핵심 도메인과 구분될 수 있다.
- 시스템상에는 여러 의미를 내포하고 있는 다른 용어를 찾을 수 있는데, 도메인 개념에 이름을 붙이기 위해서 각 용어의 의미를 명시적으로 지정했다면 깔끔한 바운디드 컨텍스트가 아니다.

### 핵심 도메인에 집중하기

- 핵심 도메인은 그 조직의 성공에 가장 중요한 비지니스 도메인의 한 부분이다.
- 핵심 도메인은 가장 높은 우선순위가 부여되며 DDD 프로젝트에 투입되는 노력의 대부분은 핵심 도메인에 초점이 맞춰져야 한다.
    - 비지니스에 분명한 이점을 제공하기 때문

## 왜 전략적 설계가 엄청나게 필수적인가

- 전략적 설계를 가로막는 거대한 진흙공의 더러운 물을 막을려면 팀은 비지니스 도메인과 그에 따른 서브 도메인은 물론이고, 반드시 그들이 개발하고 있는 바운드드 컨텍스트도 제대로 이해해야 한다.
- DDD 와 애자일은 자연스럽게 함께 사용할 수 있다. 설계가 무거울 필요는 없다.

## 현실의 도메인과 서브도메인

- 도메인은 문제점 공간과 해결책 공간을 모두 갖고 있다.
    - 문제점 공간: 우리에게 풀어야 할 전략적 비지니스 문제점을 생각하게 한다.
        - 문제점 공간은 핵심 도메인과 핵심 도메인이 사용하는 서브 도메인 조합이다.
        - 문제점 공간을 평가하는 유용한 툴로서 서브 도메인을 사용할 수 있다.
        - 서브도메인은 특정 문제를 풀기 위해 필요한 도메인의 다른 부분도 빠르게 살펴 볼 수 있도록 해준다.
    - 해결책 공간: 비지니스 문제점을 풀어줄 소프트웨어를 구현하는 방법에 초점을 맞춘다.
        - 하나 이상의 바운디드 컨텍스트이며 구체적인 소프트웨어 모델의 집합이다.
        - 바운디드 컨텍스트는 해결책을 소프트웨어로 실현시키는 데 활용된다.

## 바운디드 컨텍스트 이해하기

- 바운디드 컨텍스트는 도메인 모델의 존재를 담고 있는 명시적 경계다.
- 바운디드 컨텍스트는 주로 언어적인 경계를 이루며 이 경계 안에선 모든 유비쿼터스 언어의 용어와 구문이 구체적인 의미를 갖게 되고, 정확성을 보장한다.
- 바운디드 컨텍스트를 통해 차이점이 명확하며 잘 이해하고 있는 도메인 모델을 각각 기술해야 한다.
    - 어디서든 통용되는 유일한 의미를 가진 이름의 개념에 대해 전체 조직이 모두 동의하기는 현실적으로 어렵다.
- 책의 생명주기 각 단계마다 바운디드 컨텍스트로 구분할 수 있다.
    - 생명주기의 각 단계마다 책은 다른 정의를 가진다.
    - 책의 생명주기 전 단계를 관장하는 중앙 모델을 만들었을때 혼란, 의견 불일치, 다툼이 있을것이고 고객에게 약속한 소프트웨어는 나올 수 없을 것이다.
- 다수의 컨텍스트에서 같은 객체를 볼 수 있다면 모델링에 오류가 있다는 뜻.

### 모델 그 이상을 위해

- 바운디드 컨텍스트는 주로 유비쿼터스 언어와 그에 해당하는 도메인 모델을 캡슐화 하며, 이는 도메인 모델과의 상호작용과 도메인 모델의 지원을 위해 존재하는 다른 요소를 포함한다.

### 바운디드 컨텍스트의 크기

- 바운디드 컨텍스트는 완전한 유비쿼터스 언어를 표현하기 위해 필요한 크기만큼 커야한다.
- 핵심 도메인의 일부가 아닌 외부 개념은 제외되어야 한다.
- 유비쿼터스 언어가 아니라 아키텍처적 영향을 기준으로 삼을 경우 잘못된 크기의 바운디드 컨텍스트를 만들게 될 수 있다.
- 기술적 리소스의 관리를 위해 허위 경계를 부여할 필요가 없다.

### 기술적 컴포넌트로 정렬하기

- 자바의 경우 패키지를 사용한 모듈의 구분과 jar 패키징을 활용해 바운디드 컨텍스트를 관리할 수 있다.

### 식별자와 액세스 컨텍스트

- 모든 비지니스 환경에서 사일로가 튀어나오는 상황을 막기 위해 아키텍트는 보안과 권한을 중앙 집중화 해야 한다.
