# 11장 팩토리

## 도메인 모델 내의 팩토리

- 애그리게잇 생성 과정 중의 일부 세부사항은 잘못된 상태를 갖지 않도록 보호돼야 한다.
- 신중하게 설계된 팩토리 메소드를 애그리게잇 루트에 배치해 애그리게잇이 올바로 생성됨을 보장할 수 있다.
    - 클라이언트가 단순해지며, 생성의 세부사항을 숨겨서 값 객체와 같은 기본 매개변수만 전달하면 충분해진다.
- 애그리게잇의 팩토리 메소드는 생성자만으로는 불가능한 방식으로 유비쿼터스 언어를 표현할 수 있도록 해준다.
    - 행동에 관한 메소드의 이름이 유비쿼터스 언어를 잘 나타낸다.
- 서비스를 애그리게잇이나 다양한 타입의 값 객체를 생성하는 팩토리로 사용하는 경우
    - 바운디드 컨텍스트에 복잡한 생성 과정이 필요한 때 (바운디드 컨텍스트 통합하기)

## 애그리게잇 루트상의 팩토리 메소드

- 도메인 모델의 퍼블릭 생성자만을 지원하면 모델의 표현력을 축소시키게 되며, 도메인 언어의 해당 부분을 명시적으로 설계할 수 없을 것이다.
- 애그리게잇 생성자 전체가 클라이언트에게 감춰지면 클라이언트가 팩토리 메소드를 사용하도록 강제한다.
- 팩토리 메소드 패턴은 필요한 만큼 반복될 수 있다.
- 팩토리 메소드의 장점
    - 컨텍스트 내의 언어를 표현하는 데 효과적으로 사용될 수 있다.
    - 새 이그리케잇 인스턴스를 생성할 때 클라이언트의 짐을 줄여줄 수 있다.
    - 올바른 상태로 인스턴스화할 수 있다.

## 서비스의 팩토리

- 서비스 기반 팩토리를 이용해 수명 주기와 개념적 용어를 바운디드 컨텍스트로부터 분리할 수 있다.
