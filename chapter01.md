# 1장 DDD 를 시작하며

## 나도 DDD 를 할 수 있을까

- DDD 는 기술에 관한 것이다. DDD 의 가장 중심에 있는 원리는 토의, 경청, 이해, 발견, 그리고 비지니스의 가치,
모든 지식을 중앙화하는 모든 것이다.
- 도메인 전문가와 일하는 것이 큰 도움이 된다.
    - 소프트웨어 개발자와 도메인 전문가 모두 서로에게 배우는게 많다.
    - 도메인 전문가는 비지니스의 과정을 아주 잘 알고 있는 사람들이다.
- 도메인 모델은 무엇인가?
    - 객체 모델로 종종 구현되는데, 비지니스적 의미에 정확히 부합하는 이름을 가진 데이터와 행동을 담고 있다.
- DDD 로 성공하기 위해 아주 많은 무언가를 배워야 한다.

## 내가 왜 DDD 를 해야 할까

- 도메인 전문가와 개발자들의 눈높이를 맞춰줌으로써, 비지니스 관계자에게도 말이 되는 소프트웨어를 만들게 한다.
- 도메인 전문가나 경영진 그 어느 누구도 비지니스의 모든것을 알 수는 없다. DDD 를 통해 발견해 나가는 토론에 모든 사람이 기여하게 되면서 모든 사람이 배우게 된다.
- 지식의 중앙화를 통해서 소프트웨어 이해가 개발자와 같이 선택된 일부만이 그 내용을 이해하는 것은 아니라고 비지니스 관련자가 확신할 수 있다.
- 팀원 모두가 쓸 줄 아는 공통의 언어를 사용해 개발되면 도메인 전문가와 소프트웨어 개발자 그리고 소프트웨어 사이에 전혀 번역이 필요하지 않다.
- 설계는 코드이며, 코드가 설계다.
- DDD 는 전략적이고 전술적인 설계를 다를 수 있는 온전한 소프트웨어 개발 기술을 제공한다.
- 여느 훌륭하고 좋은 결과를 내는 투자처럼, DDD 는 팀을 위해 선행적으로 시간과 노력을 들여야 한다.

### 비지니스 가치를 제공하는 것은 어려울 수 있다.

- 도메인 전문가와 개발자 간의 이견은 비지니스 소프트웨어 개발 노력에서 만나는 최악의 단절 중 하나
    - 비지니스 관계자가 생각하고 행동하는 방식과 소프트웨어 개발자가 이를 해석한 내용 사이의 변환/매핑을 수행하는 소프트웨어가 개발되곤 한다.  
    - 시간이 지남에 따라 이 단절 때문에 비용을 치르게 된다.
    - 도메인 지식의 소프트웨어로의 번역은 개발자들이 다른 프로젝트로 혹은 다른 회사로 떠나면서 결국 사라진다.  
- 도메인 전문가가 주어진 도메인에 관한 전문성을 갖추지 못하는 경우
    - 명확하기 보다는 애매한 심적 모델을 만들어내 결국 충돌하는 소프트웨어 모델을 만들어 낸다.
- 소프트웨어 개발의 기술적 접근이 사실상 비지니스 기능을 잘못된 방향으로 변경할 때.
    - 소프트웨어에 맞게 조직이나 비지니스기능 전반을 변경한다.

### DDD 가 해줄 수 있는 일

1. DDD 는 도메인 전문가와 소프트웨어 개발자가 비지니스 전문가의 심적 모델을 반영한 소프트웨어를 함께 개발할 수 있게 해준다.
도메인 전문가와 소프트웨어 개발자가 한팀이 되어 유비쿼터스 언어를 개발하는데 전념함으로써 초기에는 서로 의견이 맞지 않았거나
도메인 중심 지식이 없었던 사람들이 하나되게 해준다.

2. DDD 는 비지니스의 전략적 이니셔티브를 다룬다. 전략적 설계의 기술적 측면은 시스템과 비지니스 문제를 명확하게 하고
결합하는데 목표가 있으며, 이는 각 비지니스 단계의 서비스를 보호한다.

3. DDD 는 실행 가능한 소프트웨어 상품을 분석하고 개발하는 전술적 설계 모델링 도구를 사용해 실제 소프트웨어의 기술적 요구에 응한다.

### 도메인의 복잡성과 씨름하기

- DDD 를 비지니스에 가장 중요한 영역부터 사용해 나가야 한다.
    - 핵심 도메인, 서브 도메인
- 프로젝트 기획의 초기 단계에서 복잡성과 단순성을 더 신중하게 결정하면 훨씬 많은 시간, 비용을 절약하고 문제점을 줄일 수 있다.

### 무기력증과 기억 상실

에너믹 도메인 모델은 개발하며 높은 비용을 지불하지만 얻는것은 거의 없거나 전혀 없기 때문에 나쁘다.

### 왜 무기력이 일어나는가

- 에너믹 도메인 모델이 만들어지는 이유
    - 샘플을 따라 만드는 사람이 많고 샘플들이 가장 단순한 방법으로 작성되기 때문
    - 마이크로 소프트의 비주얼 베이직이 간접적으로 미친 영향
    - 시장의 거의 모든 프레임워크는 단순한 객에체 퍼블릭 속성을 사용하길 요구하고, 권장하고 있음

### 무기력증이 당신의 모델에 한 일을 보라

- 무기력증으로 인한 기억력 상실
    - public 접근자를 통한 값 설정으로 의도를 알 수 없는 코드
    - 메소드가 왜 이렇게 동작하는지, 얼마나 제대로 된 유스 케이스가 있는지 알 수 없다.
    - 숨겨진 복잡도를 높인다.
- DDD 를 수행할때 설계를 구현으로 부터 구분하려고 하지 말자

## DDD 는 어떻게 하는가

### 유비쿼터스 언어

- 해당 프로젝트에 참여하는 모든 사람 간에 공유된 언어
- 도메인 전문가와 소프트웨어 개발자 모두에 의해 개발되어 공유된 언어
- 일상에서 실제로 사용하는 언어처럼 성장하고 변화한다.
- 유비쿼터스 언어의 더 나은 결과를 위해 해볼 수 있는 방법
    - 물리적이고 개념적인 도메인 그림을 그리고 이름과 행동을 붙여본다.
    - 간단한 정의로 구성된 용어집을 만든다. (소프트웨어의 중요한 개념을 담은 그림을 넣은 문서 형태 라도 시도를 하자)
    - 만들어진 구문을 나머지 팀원들과 돌려보며 리뷰하자.
    - 만들어진 문서는 코드가 빠르게 발전함에 맞춰 유지하기 어렵다면 언제든 버릴 준비를 하자.
- 소프트웨어 모델 자체에 특정 핵심 비지니스 도메인의 개념과 용어를 포착하는데 사용되는 팀의 패턴

### 유비쿼터스지만 보편적이지는 않다

- 유비쿼터스라는 단어의 사용은 엔터프라이즈 전체의 전사적인, 혹은 세계적이고 보편적인 도메인 언어를 설명하려는 의도는 아니다.
- 바운디드 컨텍스트당 하나의 유비쿼터스 언어가 있다.
- 유비쿼터스 언어는 바운디드 컨텍스트를 격리시키고 그안에서 프로젝트를 수행하는 팀 내부에서만 유비쿼터스 하다.
- 하나의 프로젝트에는 항상 하나 이상의 격리된 바운디드 컨텍스트가 있으며, 이는 컨텍스트 맵 을 사용해 통합된다.

## DDD 를 사용하는 데서 오는 비지니스 가치

1. 조직이 그 도메인에 유용한 모델을 얻는다.
    - 핵심 도메인에 초점을 맞춘다.
    - 일의 진행을 추적할 수 있는 지표를 가지게 된다.
2. 정교하고 정확하게 비지니스를 정의하고 이해한다.
    - 시간이 지남에 따라 비지니스적으로 깊이 있는 이해를 형성해 가고, 이를 분석 도구로 황횽할 수 있게 된다.
3. 도메인 전문가가 소프트웨어 설계에 기여한다.
    - 공통된 언어를 공유함으로써 소수만이 모델을 이해하게 되는 경우가 줄어들고 지속적으로 공통 지식을 공유하게 된다.
4. 사용자 경험이 개선된다.
    - 사용자 경험이 근간이 되는 모델을 설계해야 사용자가 정확히 이해하고 그로 인해 생산성이 올라간다.
    - 소프트웨어 만으로 사용자를 교육할 수 있게 되어 간접 비용이 줄어든다.
5. 순수한 모델 주변에 명확한 경계가 생긴다.
    - 방향의 순수성은 가장 중요한 곳에 노력을 집중 할 수 있도록 한다.
    - 달성 방법은 바운디드 컨텍스트에 대한 이해와 밀접한 관계가 있다.
6. 엔터프라이즈 아키텍처의 구성이 좋아진다.
    - 바운디드 컨텍스트를 잘 이해하고 신중하게 분할할 경우 전체 엔트프라이즈 아키텍처를 잘 이해할 수 있도록 해준다.
7. 애자일하고 반복적이고 지속적인 모델링이 사용된다.
    - DDD 는 도메인 전문가의 심적 모델을 정제해서 비지니스에 유용한 모델로 만드는 방법
    - 노력은 반복적이고 점진적으로 애자일 접근법을 따라 투입됨
8. 전략적인 동시에 전술적인 새로운 도구가 적용된다.
    - 바운디드 컨텍스트를 각각 담당하는 서로 다른 팀은 컨텍스트 맵을 사용해 바운디드 컨텍스트를 전략적으로 분리하고 그들 사이의 통합을 합의한다.
    - 하나의 모델링 경계 안에서 애그리게잇, 엔터티, 값 객체, 서비스, 도메인 이벤트 등의 전술 모델링 도구를 얼마든지 이용할 수 있다.

## DDD 적용의 난관

- 유비쿼터스 언어를 만드는데 드는 시간과 노력을 계산하는 것
- 도메인 전문가를 시작부터 참여시키고 프로젝트 내내 함께하는 것
- 도메인 내의 해결책에 관한 개발자의 사고방식을 바꾸는 것
- 도메인을 모델링 할때, 어떤 모델 객체가 무엇을 수행할지 신중히 고려해야함

### 도메인 모델의 합리화

- 전술적 패턴을 사용하는 방안을 고려대상
    - 바운디드 컨텍스트가 핵심 도메인으로 만들어지고 있고, 복잡하고 혁신적이며 변화를 겪는 오랜 시간 동안 견뎌내야 하는 경우 
    - 최고 비지니스 이니셔티브로서 바운디드 컨텍스트를 개발해가고 있을 경우
    - 팀이 전술적 설계를 적절히 적용할 수 있고 지원 서브도메인이 혁신적이며, 미래에 오랜 시간 동안 유지돼야 할 경우

### DDD 는 무겁지 않다

- DDD 는 무겁지 않고 테스트 우선 방식에 따라 실제 소프트웨어 모델을 빠르게 정제해 나가는 방식에 더 가깝다.
- 클라이언트가 모델을 사용하는 방법에 초점을 맞춰 테스트 우선 접근법으로 개발을 해 나가면 모델의 설계를 주도하게 된다.
- 도메인 객체의 정확성을 검증하기 위해 모든 가능하고 실용적인 측면을 따져 테스트를 추가한다.
- 기술을 잘 모르는 도메인 전문가더라도 개발자의 도움과 함께 코드를 읽어간다면 모델이 팀 목표를 잘 달성했다는 분명한 느낌을 받을 수 있어야 한다.
